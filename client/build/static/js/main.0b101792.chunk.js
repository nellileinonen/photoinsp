(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),o=n.n(c),a=n(16),s=n.n(a),i=n(8),l=n(12),u=n(10),d=n(14),h=n.n(d),j=n(18),p=n(19),b=n.n(p),f=Object(l.b)("photos/fetchPhotos",function(){var e=Object(j.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/photos",{params:{page:t}});case 2:return n=e.sent,r=n.data.map((function(e){return{alt:e.alt_description,photoId:e.id,thumbUrl:e.urls.thumb}})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O=Object(l.c)({name:"photolist",initialState:{photolist:[],page:1,status:"idle",error:null},reducers:{},extraReducers:function(e){e.addCase(f.pending,(function(e,t){e.status="loading",e.error=null})).addCase(f.fulfilled,(function(e,t){console.log("fulfilled action: ",t),Array.isArray(t.payload)?(e.status="succeeded",e.page=e.page+1,e.photolist=e.photolist.concat(t.payload)):(e.status="failed",e.error="Could not load photos.")})).addCase(f.rejected,(function(e,t){console.log("failed action: ",t),e.status="failed",e.error="Could not load photos."}))}}).reducer,x=Object(l.b)("photo/fetchPhoto",function(){var e=Object(j.a)(h.a.mark((function e(t){var n,r,c,o,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/photos/".concat(t));case 2:return n=e.sent,r=n.data,c=new Date(r.created_at),o=c.toLocaleString("en-BG"),a={alt:r.alt_description,createdAt:o,fullUrl:r.urls.full,photoId:r.id,regularUrl:r.urls.regular,thumbUrl:r.urls.thumb,userId:r.user.id,userImgUrl:r.user.profile_image.small,userRealName:r.user.name,username:r.user.username},e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=Object(l.c)({name:"photo",initialState:{photoId:"",photo:{},status:"idle",error:null},reducers:{},extraReducers:function(e){e.addCase(x.pending,(function(e,t){e.status="loading",e.error=null})).addCase(x.fulfilled,(function(e,t){console.log("fulfilled action: ",t),e.status="succeeded",e.photoId=t.payload.photoId,e.photo=t.payload})).addCase(x.rejected,(function(e,t){console.log("failed action: ",t),e.status="failed",e.error="Could not load photo."}))}}).reducer,g=Object(u.c)({photolist:O,photo:m}),v=Object(l.a)({reducer:g}),I=(n(63),n(11)),w=(n(64),n(3)),k=function(){var e=Object(w.g)();return Object(r.jsxs)("header",{children:[Object(r.jsx)(I.b,{to:"/",children:Object(r.jsx)("h1",{children:"Photoinsp"})}),Object(r.jsx)(I.b,{to:{pathname:"/info",state:{background:e}},children:"info"})]})},U=function(e){e.photoId;var t=e.thumbUrl,n=e.alt;return Object(r.jsx)("img",{src:t,alt:n})},y=function(e){var t=e.handleShowMore;return Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:function(){return t()},children:"Show more"})})},C=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.photolist.photolist})),n=Object(i.c)((function(e){return e.photolist.status})),o=Object(i.c)((function(e){return e.photolist.page})),a=Object(i.c)((function(e){return e.photolist.error}));Object(c.useEffect)((function(){"idle"===n&&e(f(o))}),[n,o,e]);return Object(r.jsxs)("div",{children:[t.map((function(e){return Object(r.jsx)(I.b,{to:{pathname:"/photos/".concat(e.photoId)},children:Object(r.jsx)(U,{photoId:e.photoId,thumbUrl:e.thumbUrl,alt:e.alt})},e.photoId)})),"loading"===n&&Object(r.jsx)("div",{children:"Loading..."}),"succeeded"===n&&Object(r.jsx)(y,{handleShowMore:function(){e(f(o))}}),"failed"===n&&Object(r.jsx)("div",{children:a})]})},S=(n(66),function(e){var t=e.children,n=Object(w.f)(),o=Object(c.useRef)(null),a=function(e){null===o.current||o.current.contains(e.target)||n.goBack()};Object(c.useEffect)((function(){return document.addEventListener("mousedown",a),function(){return document.removeEventListener("mousedown",a)}}));return Object(r.jsxs)("div",{ref:o,className:"modal-wrapper",children:[Object(r.jsx)("button",{onClick:function(){n.goBack()},children:"X"}),t]})}),_=function(){return Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:["This app fetches data from"," ",Object(r.jsx)("a",{href:"https://unsplash.com/developers",target:"_blank",rel:"noreferrer",children:"Unsplash API"}),"."]}),Object(r.jsxs)("p",{children:["The app is created by a hobbyist web developer"," ",Object(r.jsx)("a",{href:"https://github.com/nellileinonen",target:"_blank",rel:"noreferrer",children:"Nelli Leinonen"}),"."," ","Source code on"," ",Object(r.jsx)("a",{href:"https://github.com/nellileinonen/photoinsp",target:"_blank",rel:"noreferrer",children:"GitHub"}),"."]})]})},A=function(e){var t=e.photoId,n=Object(i.b)(),o=Object(i.c)((function(e){return e.photo.photo})),a=Object(i.c)((function(e){return e.photo.status})),s=Object(i.c)((function(e){return e.photo.error}));return Object(c.useEffect)((function(){n(x(t))}),[n,t]),Object(r.jsxs)("div",{children:["loading"===a&&Object(r.jsx)("p",{children:"Loading..."}),"succeeded"===a&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("img",{src:o.regularUrl,alt:o.alt,width:"500"}),Object(r.jsx)("p",{children:o.createdAt}),Object(r.jsx)("p",{children:Object(r.jsx)("a",{href:o.fullUrl,target:"_blank",children:"Full-size"})}),Object(r.jsxs)("div",{children:[Object(r.jsx)("img",{src:o.userImgUrl,alt:""}),Object(r.jsx)("p",{children:o.userRealName}),Object(r.jsx)("p",{children:o.username})]})]}),"failed"===a&&Object(r.jsx)("div",{children:s})]})},E=function(){var e=Object(w.g)(),t=e.state&&e.state.background,n="",c=e.pathname.split("/");return 3===c.length&&"photos"===c[1]&&(n=c.pop()),Object(r.jsxs)("div",{children:[Object(r.jsxs)(w.c,{location:t||e,children:[Object(r.jsx)(w.a,{exact:!0,path:"/",children:Object(r.jsx)(C,{})}),Object(r.jsx)(w.a,{path:"/info",children:Object(r.jsx)(S,{children:Object(r.jsx)(_,{})})}),Object(r.jsx)(w.a,{path:"/photos/:photoId",children:Object(r.jsx)(A,{photoId:n})})]}),t&&Object(r.jsx)(w.a,{path:"/info",children:Object(r.jsx)(S,{children:Object(r.jsx)(_,{})})})]})},L=function(){return Object(r.jsx)(I.a,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(k,{}),Object(r.jsx)(E,{})]})})};s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(i.a,{store:v,children:Object(r.jsx)(L,{})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.0b101792.chunk.js.map
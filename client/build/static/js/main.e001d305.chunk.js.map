{"version":3,"sources":["redux/photolistSlice.ts","redux/photoSlice.ts","redux/rootReducer.ts","store.ts","components/header/Header.tsx","components/photolist/thumbnail/Thumbnail.tsx","components/photolist/showMore/ShowMore.tsx","components/photolist/Photolist.tsx","components/header/modal/Modal.tsx","components/header/info/Info.tsx","components/photo/Photo.tsx","RootRoutes.tsx","App.tsx","index.tsx"],"names":["fetchPhotos","createAsyncThunk","pageNumber","a","axios","get","params","page","response","newPhotos","data","map","item","alt_description","id","urls","thumb","photolistSlice","createSlice","name","initialState","photolist","status","error","reducers","extraReducers","builder","addCase","pending","state","action","fulfilled","console","log","payload","Array","isArray","concat","rejected","fetchPhoto","photoId","date","Date","created_at","createdAt","toLocaleString","newPhoto","full","regular","user","profile_image","small","username","photoSlice","photo","rootReducer","combineReducers","photolistReducer","photoReducer","store","configureStore","reducer","Header","location","useLocation","to","pathname","background","className","InfoCircleOutlined","Thumbnail","thumbUrl","alt","src","ShowMore","handleShowMore","onClick","photoCount","Photolist","dispatch","useDispatch","photos","useSelector","photosStatus","useEffect","LoadingOutlined","Modal","children","history","useHistory","modalRef","useRef","handleClickOutside","e","current","contains","target","goBack","document","addEventListener","removeEventListener","ref","Info","href","rel","Photo","photoStatus","regularUrl","fullUrl","userImgUrl","userRealName","RootRoutes","pathElements","split","length","pop","path","exact","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e001d305.chunk.js","sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\ninterface PhotolistState {\n  photolist: any, //[],\n  status: 'idle' | 'loading' | 'succeeded' | 'failed',\n  page: number,\n  error: any //string | null\n}\n\nconst initialState = {\n  photolist: [],\n  page: 1,\n  status: 'idle',\n  error: null,\n} as PhotolistState;\n\n/* Fetch photos from API\n * Generated action types will start with 'photos/fetchPhotos'\n */\nexport const fetchPhotos = createAsyncThunk('photos/fetchPhotos', async (pageNumber: number) => {\n  const response = await axios.get('/photos', {\n    params: {\n      page: pageNumber\n    }\n  });\n\n  const newPhotos = response.data.map((item: any) => (\n    {\n      'alt': item.alt_description,\n      'photoId': item.id,\n      'thumbUrl': item.urls.thumb,\n    }\n  ));\n  return newPhotos;\n});\n\n/*\n *\n */\nconst photolistSlice = createSlice({\n  name: 'photolist',\n  initialState,\n  reducers: {},\n  // Use \"builder callback\" syntax as it is recommended with TypeScript\n  extraReducers: builder => {\n    builder\n    .addCase(fetchPhotos.pending, (state, action) => {\n      state.status = 'loading';\n      state.error = null;\n    })\n    .addCase(fetchPhotos.fulfilled, (state, action) => {\n      console.log('fulfilled action: ', action.payload);\n      // Photo fetching was successfull if the action payload is an array\n      if (Array.isArray(action.payload)) {\n        // Update store state: status tells that the fetch succeeded, page tells the next page\n        // to be fetched and photos is the place for photos\n        state.status = 'succeeded';\n        state.page = state.page + 1;\n        state.photolist = state.photolist.concat(action.payload);\n      } else {\n        // If action payload is something else than an array, fetch failed\n        state.status = 'failed';\n        state.error = 'Could not load photos.';\n        //state.error = action.payload;\n      }\n    })\n    .addCase(fetchPhotos.rejected, (state, action) => {\n      console.log('failed action: ', action);\n      state.status = 'failed';\n      state.error = 'Could not load photos.';\n      //state.error = action.payload;\n    })\n  },\n});\n\nexport default photolistSlice.reducer;","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\ninterface PhotoState {\n  photoId: string,\n  // TODO\n  photo: any,\n  status: 'idle' | 'loading' | 'succeeded' | 'failed',\n  error: any //string | null\n}\n\nconst initialState = {\n  photoId: '',\n  photo: {},\n  status: 'idle',\n  error: null,\n} as PhotoState;\n\n/* Fetch a single photo from API\n * Generated action types will start with 'photo/fetchPhoto'\n */\nexport const fetchPhoto = createAsyncThunk('photo/fetchPhoto', async (photoId: string) => {\n  const response = await axios.get(`/photos/${photoId}`);\n  const data = response.data;\n\n  const date = new Date(data.created_at);\n  const createdAt = date.toLocaleString('en-BG');\n\n  const newPhoto = {\n    'alt': data.alt_description,\n    'createdAt': createdAt,\n    'fullUrl': data.urls.full,\n    'photoId': data.id,\n    'regularUrl': data.urls.regular,\n    'thumbUrl': data.urls.thumb,\n    'userId': data.user.id,\n    'userImgUrl': data.user.profile_image.small,\n    'userRealName': data.user.name,\n    'username': data.user.username\n  };\n\n  return newPhoto;\n});\n\n/*\n *\n */\nconst photoSlice = createSlice({\n  name: 'photo',\n  initialState,\n  reducers: {},\n  // Use \"builder callback\" syntax as it is recommended with TypeScript\n  extraReducers: builder => {\n    builder\n    .addCase(fetchPhoto.pending, (state, action) => {\n      state.status = 'loading';\n      state.error = null;\n    })\n    .addCase(fetchPhoto.fulfilled, (state, action) => {\n      console.log('fulfilled action: ', action);\n      // Update store state: status tells that the fetch succeeded, photoId is the id of the fetched\n      // photo and photo contains all the necessary info of the photo\n      state.status = 'succeeded';\n      state.photoId = action.payload.photoId;\n      state.photo = action.payload;\n    })\n    .addCase(fetchPhoto.rejected, (state, action) => {\n      console.log('failed action: ', action);\n      state.status = 'failed';\n      state.error = 'Could not load photo.';\n    })\n  },\n});\n\nexport default photoSlice.reducer;","import { combineReducers } from '@reduxjs/toolkit';\nimport photolistReducer from './photolistSlice';\nimport photoReducer from './photoSlice';\n\nexport const rootReducer = combineReducers({\n  photolist: photolistReducer,\n  photo: photoReducer\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n","import { configureStore } from '@reduxjs/toolkit';\nimport { rootReducer } from './redux/rootReducer';\n\nconst store = configureStore({ reducer: rootReducer });\n\nexport default store;\n\nexport type RootState = ReturnType<typeof store.getState>\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport { InfoCircleOutlined } from '@ant-design/icons';\n\nimport './Header.scss';\n\nconst Header: React.FC = () => {\n  let location = useLocation();\n\n  return (\n    <header>\n      <Link to='/'>\n        <h1>Photoinsp</h1>\n      </Link>\n      <Link to={{\n        pathname: '/info',\n        state: { background: location }\n        }}\n        className='info'\n      >\n        <InfoCircleOutlined />\n      </Link>\n    </header>\n  );\n}\n\nexport default Header;","import React from 'react';\n\nimport './Thumbnail.scss';\n\n// TODO All the info as props or fetched from store directly by photoId\nconst Thumbnail: React.FC<{photoId: string, thumbUrl: string, alt: string}>\n  = ({ photoId, thumbUrl, alt }) => {\n  return (\n    <img src={thumbUrl} alt={alt} className='thumbnail'/>\n  );\n}\n\nexport default Thumbnail;","import React from 'react';\n\nimport './ShowMore.scss';\n\nconst ShowMore: React.FC<{handleShowMore: Function}> = ({ handleShowMore }) => {\n  return (\n    <div className='show-more'>\n      <button onClick={() => handleShowMore()} className='show-more-button'>Show more</button>\n    </div>\n  );\n}\n\nexport default ShowMore;","import React, { useEffect } from 'react';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { fetchPhotos } from '../../redux/photolistSlice';\nimport { RootState } from '../../redux/rootReducer';\n\nimport { Link } from 'react-router-dom';\n\nimport Thumbnail from './thumbnail/Thumbnail';\nimport ShowMore from './showMore/ShowMore';\nimport { LoadingOutlined } from '@ant-design/icons';\n\nimport './Photolist.scss';\n\n/* \n * Helper variable and function to create unique keys to photo thumbnails.\n * Photo id:s can't be used as keys because data in Unsplash updates often and\n * same photos can be fetched multiple times if the app is left open and after\n * some time the user continues browsing where they left\n */\nlet photoCount = 1;\nconst giveKey = () => {\n  photoCount = photoCount + 1;\n  return photoCount;\n};\n\nconst Photolist: React.FC = () => {\n  const dispatch = useDispatch();\n  \n  const photos = useSelector((state: RootState) => state.photolist.photolist);\n  const photosStatus = useSelector((state: RootState) => state.photolist.status);\n  const pageNumber = useSelector((state: RootState) => state.photolist.page);\n  const error = useSelector((state: RootState) => state.photolist.error);\n\n  useEffect(() => {\n    // Only fetch initial list of photos once\n    if (photosStatus === 'idle') {\n      dispatch(fetchPhotos(pageNumber));\n    }\n  }, [photosStatus, pageNumber, dispatch]);\n\n  // Dispatch action to fetch photos\n  const handleShowMore = () => {\n    dispatch(fetchPhotos(pageNumber));\n  };\n\n  return (\n    <div>\n      <h2>Browse photos, relax and get inspired</h2>\n\n      <div className='flex-container'>\n        {photos.map((photo: any) =>\n        <Link\n          key={giveKey()}\n          to={{pathname: `/photos/${photo.photoId}`}}\n          className='flex-item'\n        >\n          <Thumbnail photoId={photo.photoId} thumbUrl={photo.thumbUrl} alt={photo.alt} />\n        </Link>\n        )}\n      </div>\n\n      {photosStatus === 'loading' &&\n      <LoadingOutlined className='loading'/>}\n\n      {photosStatus === 'succeeded' &&\n      <ShowMore handleShowMore={handleShowMore} />}\n\n      {photosStatus === 'failed' &&\n      <div className='error'>\n        {error}\n      </div>}\n\n    </div>\n  );\n}\n\nexport default Photolist;\n","import React, { useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './Modal.scss';\n\n// TODO: make sure the modal is accessible:\n// https://tinloof.com/blog/how-to-create-an-accessible-react-modal/\n\nconst Modal: React.FC = ({ children }) => {\n  let history = useHistory();\n\n  // TODO: read again this https://www.carlrippon.com/react-refs-typescript/\n  const modalRef = useRef<HTMLInputElement>(null);\n\n  // If mouse is clicked outside modal, close modal by navigating back in history\n  const handleClickOutside = (e: any) => {\n    if (modalRef.current !== null && (!modalRef.current.contains(e.target))) {\n      history.goBack();\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  });\n\n  const closeModal = () => {\n    history.goBack();\n  };\n\n  return (\n    <div className='modal-bg'>\n      <div ref={modalRef} className='modal-wrapper'>\n        {/*goes back to mainpage<Link to='/'>\n          X\n        </Link>*/}\n        <button onClick={() => closeModal()} className='close'>X</button>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default Modal;\n","import React from 'react';\n\nimport './Info.scss';\n\nconst Info: React.FC = () => {\n  return (\n    <div className='info-content'>\n      <h3>What is this?</h3>\n      <p>\n        This app is created for you to enjoy beautiful photographs shared by people from\n        all around the world.\n      </p>\n      <p>\n        Here you can calm down and focus on the essential - the photographs.\n        There are no notifications, private messages, likes, friend requests or\n        anything else that could distract you.\n      </p>\n      <h3>Whose photos are these?</h3>\n      <p>\n        This app fetches data from\n        {' '}\n        <a href='https://unsplash.com/developers' target='_blank' rel='noreferrer'>\n          Unsplash API\n        </a>. Every photo view has a link to the original full-sized photo.\n      </p>\n      <h3>Who made this?</h3>\n      <p>\n        The app is created by a hobbyist web developer\n        {' '}\n        <a href='https://github.com/nellileinonen' target='_blank'  rel='noreferrer'>\n          Nelli Leinonen\n        </a>.\n        {' '}\n        Source code on\n        {' '}\n        <a href='https://github.com/nellileinonen/photoinsp' target='_blank' rel='noreferrer'>\n          GitHub\n        </a>.\n      </p>\n    </div>\n  );\n}\n\nexport default Info;","import React, { useEffect } from 'react';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { fetchPhoto } from '../../redux/photoSlice';\nimport { RootState } from '../../redux/rootReducer';\n\nimport { LoadingOutlined } from '@ant-design/icons';\n\nimport './Photo.scss';\n\nconst Photo: React.FC<{photoId: string}> = ({ photoId }) => {\n  const dispatch = useDispatch();\n\n  const photo = useSelector((state: RootState) => state.photo.photo);\n  const photoStatus = useSelector((state: RootState) => state.photo.status);\n  const error = useSelector((state: RootState) => state.photo.error);\n\n  useEffect(() => {\n    dispatch(fetchPhoto(photoId));\n  }, [dispatch, photoId]);\n\n  return (\n    <div>\n      {photoStatus === 'loading' &&\n      <LoadingOutlined className='loading'/>}\n\n      {photoStatus === 'succeeded' &&\n      <>\n        <img src={photo.regularUrl} alt={photo.alt} className='regular-photo'/>\n        <div>\n          <div className='photo-info'>\n            <p>{photo.createdAt}\n            <a href={photo.fullUrl} target='_blank' rel='noreferrer'>Full-sized</a></p>\n\n            <div className='user-info'>\n              <p><img src={photo.userImgUrl} alt='' className='user-img'/>\n              {photo.userRealName}<br/>{photo.username}</p>\n            </div>\n\n          </div>\n        </div>\n      </>}\n\n      {photoStatus === 'failed' &&\n      <div className='error'>{error}</div>}\n    </div>\n  );\n}\n\nexport default Photo;","import React from 'react';\nimport { Route, Switch, useLocation } from 'react-router-dom';\n\nimport Photolist from './components/photolist/Photolist';\nimport Modal from './components/header/modal/Modal';\nimport Info from './components/header/info/Info';\nimport Photo from './components/photo/Photo';\n\nconst RootRoutes = () => {\n  // TODO: use proper type\n  let location: any = useLocation();\n  let background = location.state && location.state.background;\n\n  /* !! SOS !! This is dangerous and stupid !! SOS !! */\n  //console.log('location in rootroutes: ', location);\n  let photoId = '';\n  const pathElements = location.pathname.split('/');\n  if (pathElements.length === 3 && pathElements[1] === 'photos') {\n    photoId = pathElements.pop();\n  }\n\n  return (\n    <div>\n      <Switch location={background || location}>\n        <Route path='/info'>\n          <Modal children={<Info />}/>\n        </Route>\n        <Route exact path=\"/\">\n          <Photolist />\n        </Route>\n        <Route path='/photos/:photoId'>\n          <Photo photoId={photoId}/>\n        </Route>\n      </Switch>\n\n      {/* Modal view on top of background if background is set */}\n      {background && <Route path='/info'><Modal children={<Info />}/></Route>}\n\n    </div>\n  );\n};\n\nexport default RootRoutes;\n","import React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport './App.scss';\nimport Header from './components/header/Header';\nimport RootRoutes from './RootRoutes';\n\nconst App: React.FC = () => {\n  return (\n    <Router>\n      <div className=\"App\">\n        <Header />\n        <RootRoutes />\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}